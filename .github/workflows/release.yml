name: Create Release By Private Repo
on:
  workflow_dispatch:

jobs:
  download:
    runs-on: ubuntu-latest
    steps:
    - name: "Download artifact"
      run: |
        OTHER_REPO="wetoria/sy-plugin-enhance-codes"
        WF_NAME="release.yml"
        ARTIFACT_NAME="package.zip"
        RUN_ID=`gh run --repo ${OTHER_REPO} list --workflow ${WF_NAME} --json databaseId --jq .[0].databaseId`
        gh run --repo ${OTHER_REPO} download ${RUN_ID} -n ${ARTIFACT_NAME}
        # List the artifiact directory/files
        ls -lR
      env:
        GITHUB_TOKEN: ${{ secrets.CUSTOM_TOKEN }}